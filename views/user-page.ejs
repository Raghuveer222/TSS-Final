<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link rel="stylesheet" href="/stylesheets/user-page.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: black;">
        <div class="container-fluid">
            <a class="navbar-brand" href="#" style="color: rgb(220, 239, 220);">Transport Scheduler</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item"><a class="nav-link active" href="#" id="dashboard-link">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="initiate-shipment-link">Initiate Shipment</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="manage-profile-link">Manage Profile</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="contact-link">Contact</a></li>
                    <li class="nav-item"><a class="nav-link" href="#" id="help-link">Help</a></li>
                </ul>
                <form class="d-flex">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-light" type="submit">Search</button>
                </form>
            </div>
        </div>
    </nav>

    <div class="container">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="section active">
            <h2 id="head2">Welcome to Transport Scheduler</h2>
            <p id="para1">Transport Scheduler is your one-stop solution for scheduling and managing shipments efficiently. 
               Whether you're an individual or a business, our platform ensures that your logistics needs are met seamlessly. 
               Track your deliveries, initiate shipments, and manage your profile with ease.</p>
               <div id="image" class="carousel slide" data-bs-ride="carousel">
                
                <!-- Indicators for the images -->
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#image" data-bs-slide-to="0" class="active" aria-current="true"></button>
                    <button type="button" data-bs-target="#image" data-bs-slide-to="1"></button>
                    <button type="button" data-bs-target="#image" data-bs-slide-to="2"></button>
                </div>
            
                <!-- Wrapper for the images -->
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img src="/image/photo1.JPG" alt="Project Image 1" class="d-block w-100 img-fluid full-image">
                    </div>
                    <div class="carousel-item">
                        <img src="/image/photo2.JPG" alt="Project Image 2" class="d-block w-100 img-fluid full-image">
                    </div>
                    <div class="carousel-item">
                        <img src="/image/photo3.JPG" alt="Project Image 3" class="d-block w-100 img-fluid full-image">
                    </div>
                </div>
            
                <!-- Controls for navigation -->
                <button class="carousel-control-prev" type="button" data-bs-target="#image" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#image" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
            

           <h5 id="head5"> Why Choose Us ? </h5>
           <h6 id="head6">  
           <span>&#9679;</span> Easy-to-use shipment scheduling and management.<br>
           <span>&#9679;</span> Wide range of vehicles for diverse transport needs.<br>
           <span>&#9679;</span>  Real-time updates and notifications.<br>
           <span>&#9679;</span> Secure and reliable delivery solutions. 
           </h6>

            <h5 id="head55">How It Works ?</h5>
            <h6 id="head66">
            <span>&#9679;</span> Create your account and log in.<br>
            <span>&#9679;</span> Initiate your shipment by entering details like location, date, and vehicle type.<br>
            <span>&#9679;</span> Relax while we handle the rest.
            </h6>
        </div>

        <!-- Initiate Shipment Section -->
        <div id="initiate-shipment-section" class="section">
            <h1>Initiate Shipment</h1>
            <form id="shipmentForm" action="/shipment" method ="post">
                <label for="location">Drop-off Location:</label>
                <input type="text" id="location" required>

                <label for="dateTime">Select Date and Time:</label>
                <input type="datetime-local" id="dateTime" required>

                <label for="goodsDescription">Describe Goods:</label>
                <textarea id="goodsDescription" required></textarea>

                <label for="vehicleType">Choose Vehicle Type:</label>
                <select id="vehicleType" required>
                    <option value="Truck">Truck</option>
                    <option value="Van">Van</option>
                    <option value="Bike">Bike</option>
                </select>

                <button type="submit">Submit Delivery Request</button>
            </form>
        </div>

        <!-- Manage Profile Section -->
        <div id="manage-profile-section" class="section">
            <h1>Manage Profile</h1>
            <p><strong>Username:</strong> <span id="username">John Doe</span></p>
            <p><strong>Email:</strong> <span id="email">johndoe@example.com</span></p>
        </div>

        <!-- Contact Section -->
        <div id="contact-section" class="section">
            <h1>Contact Us</h1>
            <p>Email: <a href="mailto:support@transport.com">support@transport.com</a></p>
            <p>Phone: +123-456-7890</p>
        </div>

        <!-- Help Section -->
        <div id="help-section" class="section">
            <h1>Help</h1>
            <p>If you have any questions or need assistance, feel free to reach out to our support team. We're here to help!</p>
            <p>Email: <a href="mailto:help@transport.com">help@transport.com</a></p>
            <p>Phone: +987-654-3210</p>
        </div>

        <!-- Notifications Section -->
        <div id="notifications-section" class="section">
           <h1>Notifications</h1>
           <ul id="notifications-list">
               <!-- Notifications will be dynamically added here -->
           </ul>
        </div>

        <!-- Footer -->
        <footer>
            <p>&copy; 2024 Transport Scheduler. All Rights Reserved.</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Retrieve logged-in user details from localStorage
        const loggedInUser = JSON.parse(localStorage.getItem("loggedInUser"));

        if (!loggedInUser) {
            alert("No user is logged in. Redirecting to login page.");
            window.location.href = "login.html";
        } else {
            // Populate user profile
            document.getElementById("username").textContent = loggedInUser.name;
            document.getElementById("email").textContent = loggedInUser.email;
        }

        // Dashboard Navigation
        document.getElementById("dashboard-link").addEventListener("click", () => showSection("dashboard-section"));
        document.getElementById("initiate-shipment-link").addEventListener("click", () => showSection("initiate-shipment-section"));
        document.getElementById("manage-profile-link").addEventListener("click", () => showSection("manage-profile-section"));
        document.getElementById("contact-link").addEventListener("click", () => showSection("contact-section"));
        document.getElementById("help-link").addEventListener("click", () => showSection("help-section"));

        function showSection(sectionId) {
            const sections = document.querySelectorAll(".section");
            sections.forEach(section => section.classList.remove("active"));
            document.getElementById(sectionId).classList.add("active");
        }

        // Handle shipment form submission
        document.getElementById("shipmentForm").addEventListener("submit", function (e) {
            e.preventDefault();

            const shipmentDetails = {
                location: document.getElementById("location").value,
                dateTime: document.getElementById("dateTime").value,
                goodsDescription: document.getElementById("goodsDescription").value,
                vehicleType: document.getElementById("vehicleType").value,
                user: loggedInUser.email,
            };

            // Save shipment request to localStorage
            const shipmentRequests = JSON.parse(localStorage.getItem("shipmentRequests")) || [];
            shipmentRequests.push(shipmentDetails);
            localStorage.setItem("shipmentRequests", JSON.stringify(shipmentRequests));

            alert("Your shipment request has been submitted successfully!");
            document.getElementById("shipmentForm").reset();
        });
    </script>
</body>
</html>
